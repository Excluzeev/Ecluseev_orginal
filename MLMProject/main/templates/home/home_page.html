{% extends 'layout.html' %}
{% load static %}
{% block content %}
    <div class="container">
    <nav class="navbar navbar-expand-md navbar-block">
          <!-- Brand -->
          <a class="navbar-brand mlm-text-color" href="#">Formula 50</a>

          <!-- Toggler/collapsibe Button -->
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
            <span class="navbar-toggler-icon"><i class="fa fa-bars"></i> </span>
          </button>

          <!-- Navbar links -->
          <div class="collapse navbar-collapse" id="collapsibleNavbar">
            <ul class="navbar-nav">
                <!--
              <li class="nav-item">
                <a class="nav-link mlm-text-color active-link" href="#"><i class="fa fa-home"></i> &nbsp;Home</a>
              </li>
                 <li class="nav-item">
                <a class="nav-link mlm-text-color" href="#"><i class="fa fa-sitemap" aria-hidden="true"></i>&nbsp;My References</a>
              </li>
              -->
                 <li class="nav-item">
                <a class="nav-link mlm-text-color" href="#"><i class="fa fa-user" aria-hidden="true"></i>&nbsp;My Profile</a>
              </li>
              <li class="nav-item">
                <a class="nav-link mlm-text-color" href="/logout"><i class="fa fa-sign-out"></i> &nbsp;Logout</a>
              </li>

            </ul>
          </div>
        </nav>

        <div class="page-content">
            <div class="statistics-block">
                <div class="stat-item">Course <span>1</span></div>
                <div class="stat-item">Group <span>1</span></div>



            </div>

            <table id="table_id" class="display">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Email</th>
                        <th>Status</th>
                        <th>Invite On</th>
                    </tr>
                </thead>
                <tbody>
                    {%  for invite_obj in invites %}
                    <tr>
                        <td>{{ invite_obj.id }}</td>
                        <td>{{ invite_obj.email }}</td>
                        <td>
                            {% if invite_obj.status == 'invited' %}
                            <div class="invite-status invited">Invited</div>
                            {% elif invite_obj.status == 'accepted' %}
                                <div class="invite-status accepted">Accepted</div>
                            {% endif %}
                        </td>
                        <td>{{ invite_obj.created_on }}</td>

                    </tr>
                {% endfor %}

                </tbody>
            </table>
        </div>

        <div id="treeview" >

        </div>

        <!-- The Modal -->
        <div class="modal" id="invite_modal">
          <div class="modal-dialog">
            <div class="modal-content">
                  <form action="/invite" method="post">

              <!-- Modal Header -->
              <div class="modal-header">
                <h4 class="modal-title">Invite</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
              </div>

              <!-- Modal body -->
              <div class="modal-body">

                      {% csrf_token %}
                      <div class="form-group row">
                          <div class="col-lg-4">Email <span class="required-field">*</span></div>
                          <div class="col-lg-8">
                              <input required type="email" class="form-control" name="email" placeholder="Email Address">
                          </div>
                      </div>

                       <div class="form-group row">
                          <div class="col-lg-4">Message <span class="required-field">*</span></div>
                          <div class="col-lg-8">
                              <textarea required class="form-control" name="message" id="" cols="30" rows="3"></textarea>
                          </div>
                      </div>


              </div>

              <!-- Modal footer -->
              <div class="modal-footer">
                  <button type="button" class="btn mlm-btn mlm-bg-color" data-dismiss="modal">Cancel</button>
                  <button type="submit" class="btn mlm-btn mlm-bg-color" >Send Invite</button>
              </div>
                                  </form>


            </div>

          </div>
        </div>

    </div>

    <script>
        $(document).ready( function () {

            $('#table_id').DataTable(
                {
                        dom: "Bfrtip",
                        buttons: [
                            {
                                text: 'Invite',
                                action: function ( e, dt, node, config ) {

                                    $("#invite_modal").modal("show")

                                }
                            },

                        ]
                    }
            );
            var chart_config = {
            chart: {
            container: "#treeview",
            connectors: {
                type: 'step'
            },
            node: {
                HTMLclass: 'nodeExample1'
            }
        },
        nodeStructure: {
            text: {
                name: "Mark Hill",
                title: "Scholar",
            },
            image: "/static/treant/examples/headshots/2.jpg",
            children: [
                {
                    text:{
                        name: "Joe Linux",
                        title: "Bursar",
                    },
                    image: "/static/treant/examples/headshots/1.jpg",
                    children: [
                        {
                            text:{
                                name: "Ron Blomquist",
                                title: "Prefect"
                            },
                            image: "/static/treant/examples/headshots/8.jpg"
                        },
                        {
                            text:{
                                name: "Michael Rubin",
                                title: "Prefect",
                            },
                            image: "/static/treant/examples/headshots/9.jpg"
                        }
                    ]
                },

                {
                    text:{
                        name: "John Green",
                        title: "Bursar",
                    },
                    image: "/static/treant/examples/headshots/6.jpg",
                    children: [
                        {
                            text:{
                                name: "Erica Reel",
                                title: "Prefect"
                            },

                            image: "/static/treant/examples/headshots/10.jpg"
                        },
                        {
                            text:{
                                name: "Erica Reel",
                                title: "Prefect"
                            },
                            image: "/static/treant/examples/headshots/10.jpg"
                        }
                    ]
                }
            ]
        }
    };



            var my_chart = new Treant(chart_config);

        } );
    </script>

{%  endblock %}


